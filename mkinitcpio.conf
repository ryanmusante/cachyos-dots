# mkinitcpio configuration - /etc/mkinitcpio.conf
# Changes require: sudo mkinitcpio -P && sudo sdboot-manage update
# See: https://wiki.archlinux.org/title/Mkinitcpio

# MODULES - Early-loaded kernel modules (before root mount)
# amdgpu: early KMS (no flickering) | nvme: NVMe boot drive support
MODULES=(amdgpu nvme)

# BINARIES - Additional binaries for early boot
BINARIES=()

# FILES - Additional files/firmware needed before root mount
FILES=()

# HOOKS - Build hooks (order matters, each depends on previous)
# base: essential structure | systemd: systemd in initramfs (faster than busybox)
# autodetect: only detected hardware modules | microcode: CPU microcode (after autodetect for single-machine)
# modconf: modprobe.d config | kms: early display | keyboard: passphrase entry
# sd-vconsole: console font/keymap (systemd version of keymap+consolefont)
# block: block devices | filesystems: fs drivers | fsck: filesystem check
#
# HOOK ORDER NOTES:
# - microcode AFTER autodetect: Only includes microcode for current CPU (smaller image)
#   For multi-system images (e.g., portable installs), move microcode BEFORE autodetect
#   to include all available microcode. See: https://wiki.archlinux.org/title/Microcode
# - No resume hook: suspend/hibernate disabled via masked systemd targets
#   Add 'resume' after 'filesystems' if enabling hibernation
# - No sd-encrypt hook: Add before 'filesystems' for LUKS encrypted systems
#   See: https://wiki.archlinux.org/title/Dm-crypt/System_configuration#mkinitcpio
# - No plymouth hook: If previously using plymouth, remove 'plymouth' from HOOKS
#   and run 'sudo mkinitcpio -P' after uninstalling plymouth package
HOOKS=(base systemd autodetect microcode modconf kms keyboard sd-vconsole block filesystems fsck)

# COMPRESSION - Trade-off: size vs decompression speed
# zstd: good balance | lz4: fastest boot | gzip: compatible | xz: smallest
COMPRESSION="zstd"
